import"./vendor-b487b824.js";import{C as u,r as d}from"./charts-e7add24e.js";import{S as l}from"./utils-61741a63.js";window.http={async request(o,e={}){const t={method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}},r=document.head.querySelector('meta[name="csrf-token"]');r&&(t.headers["X-CSRF-TOKEN"]=r.content);const n={...t,...e};try{const a=await fetch(o,n);if(!a.ok){switch(a.status){case 401:window.location.href="/login";break;case 403:console.error("Access denied");break;case 419:console.error("CSRF token mismatch. Please refresh the page.");break;case 422:console.error("Validation errors");break;case 500:console.error("Server error");break;default:console.error("HTTP Error:",a.status)}throw new Error(`HTTP ${a.status}: ${a.statusText}`)}return a}catch(a){throw console.error("Request failed:",a),a}},async get(o,e={}){return this.request(o,{...e,method:"GET"})},async post(o,e,t={}){return this.request(o,{...t,method:"POST",body:JSON.stringify(e)})},async put(o,e,t={}){return this.request(o,{...t,method:"PUT",body:JSON.stringify(e)})},async delete(o,e={}){return this.request(o,{...e,method:"DELETE"})}};window.axios=window.http;window.ConCureUtils={formatCurrency:(o,e="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(o),formatDate:(o,e="en-US")=>new Intl.DateTimeFormat(e).format(new Date(o)),formatFileSize:o=>{if(o===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(o)/Math.log(e));return parseFloat((o/Math.pow(e,r)).toFixed(2))+" "+t[r]},debounce:(o,e,t)=>{let r;return function(...a){const s=()=>{r=null,t||o(...a)},i=t&&!r;clearTimeout(r),r=setTimeout(s,e),i&&o(...a)}},throttle:(o,e)=>{let t;return function(){const r=arguments,n=this;t||(o.apply(n,r),t=!0,setTimeout(()=>t=!1,e))}},generateId:(o=8)=>Math.random().toString(36).substring(2,o+2),copyToClipboard:async o=>{try{return await navigator.clipboard.writeText(o),!0}catch(e){return console.error("Failed to copy text: ",e),!1}},isValidEmail:o=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o),isValidPhone:o=>/^[\+]?[1-9][\d]{0,15}$/.test(o.replace(/\s/g,"")),getUrlParameter:o=>new URLSearchParams(window.location.search).get(o),setUrlParameter:(o,e)=>{const t=new URL(window.location);t.searchParams.set(o,e),window.history.pushState({},"",t)},removeUrlParameter:o=>{const e=new URL(window.location);e.searchParams.delete(o),window.history.pushState({},"",e)}};document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("[data-auto-submit]").forEach(s=>{s.querySelectorAll("input, select, textarea").forEach(c=>{c.addEventListener("change",()=>{s.submit()})})}),document.querySelectorAll(".modal").forEach(s=>{s.addEventListener("shown.bs.modal",()=>{const i=s.querySelector('input:not([type="hidden"]), select, textarea');i&&i.focus()})}),document.querySelectorAll("[data-confirm-delete]").forEach(s=>{s.addEventListener("click",function(i){i.preventDefault();const c=this.dataset.confirmDelete||"Are you sure you want to delete this item?";confirm(c)&&(this.tagName==="FORM"?this.submit():this.closest("form")?this.closest("form").submit():this.href&&(window.location.href=this.href))})}),document.querySelectorAll(".alert[data-auto-hide]").forEach(s=>{const i=parseInt(s.dataset.autoHide)||5e3;setTimeout(()=>{bootstrap.Alert.getOrCreateInstance(s).close()},i)}),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(s){return new bootstrap.Tooltip(s)}),[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(s){return new bootstrap.Popover(s)})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(o=>{console.log("SW registered: ",o)}).catch(o=>{console.log("SW registration failed: ",o)})});u.register(...d);window.Chart=u;window.Swal=l;class h{constructor(){this.init()}init(){this.setupCSRFToken(),this.setupAlerts(),this.setupFormValidation(),this.setupFileUploads(),this.setupCharts(),this.setupLanguageSwitcher(),this.setupTooltips(),this.setupModals()}setupCSRFToken(){const e=document.querySelector('meta[name="csrf-token"]');e&&console.log("CSRF token found:",e.getAttribute("content"))}setupAlerts(){document.querySelectorAll(".alert:not(.alert-permanent)").forEach(t=>{setTimeout(()=>{const r=new bootstrap.Alert(t);r&&r.close()},5e3)})}setupFormValidation(){document.querySelectorAll(".needs-validation").forEach(t=>{t.addEventListener("submit",r=>{t.checkValidity()||(r.preventDefault(),r.stopPropagation()),t.classList.add("was-validated")})})}setupFileUploads(){document.querySelectorAll('input[type="file"]').forEach(t=>{t.addEventListener("change",r=>{this.handleFilePreview(r.target)})})}handleFilePreview(e){const t=e.files[0];if(!t)return;const r=e.parentElement.querySelector(".file-preview");if(r)if(t.type.startsWith("image/")){const n=new FileReader;n.onload=a=>{r.innerHTML=`
                    <img src="${a.target.result}" class="img-thumbnail" style="max-width: 200px; max-height: 200px;">
                    <p class="mt-2 mb-0 text-muted small">${t.name}</p>
                `},n.readAsDataURL(t)}else r.innerHTML=`
                <div class="d-flex align-items-center">
                    <i class="fas fa-file fa-2x text-primary me-3"></i>
                    <div>
                        <p class="mb-0 fw-bold">${t.name}</p>
                        <p class="mb-0 text-muted small">${this.formatFileSize(t.size)}</p>
                    </div>
                </div>
            `}formatFileSize(e){if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(2))+" "+r[n]}setupCharts(){const e=document.getElementById("financialChart");e&&this.createFinancialChart(e);const t=document.getElementById("patientChart");t&&this.createPatientChart(t)}createFinancialChart(e){new u(e,{type:"line",data:{labels:["Jan","Feb","Mar","Apr","May","Jun"],datasets:[{label:"Revenue",data:[12e3,19e3,15e3,25e3,22e3,3e4],borderColor:"#008080",backgroundColor:"rgba(0, 128, 128, 0.1)",tension:.4},{label:"Expenses",data:[8e3,12e3,1e4,15e3,14e3,18e3],borderColor:"#dc3545",backgroundColor:"rgba(220, 53, 69, 0.1)",tension:.4}]},options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Financial Overview"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(t){return"$"+t.toLocaleString()}}}}}})}createPatientChart(e){new u(e,{type:"doughnut",data:{labels:["New Patients","Regular Patients","Follow-up"],datasets:[{data:[30,50,20],backgroundColor:["#008080","#28a745","#ffc107"]}]},options:{responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!0,text:"Patient Distribution"}}}})}setupLanguageSwitcher(){document.querySelectorAll(".language-switch").forEach(t=>{t.addEventListener("click",r=>{r.preventDefault();const n=t.dataset.lang;this.switchLanguage(n)})})}switchLanguage(e){l.fire({title:"Switching Language...",allowOutsideClick:!1,didOpen:()=>{l.showLoading()}}),window.location.href=`/language/${e}`}setupTooltips(){[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(t=>new bootstrap.Tooltip(t))}setupModals(){document.querySelectorAll(".modal").forEach(t=>{t.addEventListener("shown.bs.modal",()=>{const r=t.querySelector("input, select, textarea");r&&r.focus()})})}showSuccess(e){l.fire({icon:"success",title:"Success!",text:e,timer:3e3,showConfirmButton:!1})}showError(e){l.fire({icon:"error",title:"Error!",text:e})}showConfirm(e,t,r){l.fire({title:e,text:t,icon:"warning",showCancelButton:!0,confirmButtonColor:"#008080",cancelButtonColor:"#dc3545",confirmButtonText:"Yes, proceed!",cancelButtonText:"Cancel"}).then(n=>{n.isConfirmed&&r&&r()})}}document.addEventListener("DOMContentLoaded",()=>{window.ConCure=new h});
